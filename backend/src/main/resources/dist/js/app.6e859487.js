(function(){"use strict";var e={8976:function(e,t,n){var s=n(144),o=function(){var e=this,t=e._self._c;return t("div",{style:{backgroundImage:"url("+n(5665)+")"},attrs:{id:"app"}},[t("nav",[t("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),t("router-link",{attrs:{to:"/waiting"}},[e._v("WaitingRoom")])],1),t("router-view")],1)},i=[],r=n(3736),a={},l=(0,r.Z)(a,o,i,!1,null,null,null),u=l.exports,c=n(8345),m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("router-link",{attrs:{to:"/login"}},[e._v("로그인")])],1)},d=[],p={name:"HomeView",components:{}},v=p,f=(0,r.Z)(v,m,d,!1,null,null,null),h=f.exports,g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("h1",[e._v("로그인")]),t("form",{staticClass:"loginform"},[t("p",[t("label",{attrs:{for:"memberIdInput"}},[e._v("이메일")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.memberId,expression:"memberId",modifiers:{trim:!0}}],ref:"memberIdInput",staticClass:"input_text",attrs:{type:"text",id:"memberIdInput",placeholder:"email"},domProps:{value:e.memberId},on:{input:function(t){t.target.composing||(e.memberId=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("p",[t("label",{attrs:{for:"memberPasswordInput"}},[e._v("패스워드")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.memberPassword,expression:"memberPassword",modifiers:{trim:!0}}],ref:"memberPasswordInput",staticClass:"input_text",attrs:{type:"password",id:"memberPasswordInput",placeholder:"password"},domProps:{value:e.memberPassword},on:{input:function(t){t.target.composing||(e.memberPassword=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("p",{staticClass:"buttons"},[t("button",{staticClass:"button blue",on:{click:function(t){return t.preventDefault(),e.doLogin.apply(null,arguments)}}},[e._v("로그인")]),t("button",{staticClass:"button",on:{click:function(t){return t.preventDefault(),e.doCancel.apply(null,arguments)}}},[e._v("취소")])])]),t("p",[e._v(e._s(e.errorMessage))]),t("button",{staticClass:"button"},[t("router-link",{attrs:{to:"/signup"}},[e._v("회원가입")])],1)])},b=[],_={name:"LoginPage",data:function(){return{memberId:"",memberPassword:"",errorMessage:""}},methods:{doLogin(){return""==this.memberId?(alert("아이디를 입력하세요."),void this.$refs.memberIdInput.focus()):""==this.memberPassword?(alert("패스워드를 입력하세요."),void this.$refs.memberPasswordInput.focus()):void 0},doCancel(){this.$router.push("/")}},mounted(){this.$refs.memberIdInput.focus()}},w=_,y=(0,r.Z)(w,g,b,!1,null,"4c4136de",null),P=y.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"signup"},[t("h1",[e._v("회원가입")]),t("form",{staticClass:"signupform"},[t("p",[t("label",{attrs:{for:"emailInput"}},[e._v("EMAIL")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.email,expression:"email",modifiers:{trim:!0}}],staticClass:"input_text",attrs:{type:"text",id:"emailInput",placeholder:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("p",[t("label",{attrs:{for:"nicknameInput"}},[e._v("NICKNAME")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.nickname,expression:"nickname",modifiers:{trim:!0}}],staticClass:"input_text",attrs:{type:"text",id:"nicknameInput",placeholder:"nickname"},domProps:{value:e.nickname},on:{input:function(t){t.target.composing||(e.nickname=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("p",[t("label",{attrs:{for:"PWInput"}},[e._v("PW")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password,expression:"password",modifiers:{trim:!0}}],staticClass:"input_text",attrs:{type:"password",id:"PWInput",placeholder:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),t("p",[t("label",{attrs:{for:"PWCheckInput"}},[e._v("PW 확인")]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.checkPassword,expression:"checkPassword",modifiers:{trim:!0}}],staticClass:"input_text",attrs:{type:"password",id:"PWCheckInput",placeholder:"password"},domProps:{value:e.checkPassword},on:{input:function(t){t.target.composing||(e.checkPassword=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._m(0)]),t("button",[t("router-link",{attrs:{to:"/login"}},[e._v("로그인")])],1)])},k=[function(){var e=this,t=e._self._c;return t("p",{staticClass:"buttons"},[t("button",{staticClass:"button"},[e._v("가입하기")])])}],C={name:"SignupPage",data(){return{email:"",nickname:"",password:"",checkPassword:""}},methods:{}},x=C,I=(0,r.Z)(x,S,k,!1,null,null,null),M=I.exports,O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"waiting-room"},[t("chatting"),t("br"),t("room-list"),t("br"),t("user-list"),t("br"),t("router-link",{attrs:{to:"/room"}},[e._v("게임방 입장")])],1)},N=[],Z=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"chatting"}},[t("h2",[e._v("Vue.js WebSocket Tutorial")]),t("button",{on:{click:function(t){return e.sendMessage("hello")}}},[e._v("Send Message")])])},j=[],U={name:"ChattingStage",data:function(){return{connection:null}},methods:{sendMessage:function(e){console.log("Hello"),console.log(this.connection),this.connection.send(e)}},created:function(){console.log("Starting connection to WebSocket Server"),this.connection=new WebSocket("wss://echo.websocket.org"),this.connection.onmessage=function(e){console.log(e)},this.connection.onopen=function(e){console.log(e),console.log("Successfully connected to the echo websocket server...")}}},V=U,L=(0,r.Z)(V,Z,j,!1,null,null,null),$=L.exports,D=function(){var e=this,t=e._self._c;return t("div",{staticClass:"room-list"},[t("room-list-item")],1)},W=[],T=function(){var e=this,t=e._self._c;return t("div",{staticClass:"room-list-item"})},E=[],R={name:"RoomListItem"},A=R,H=(0,r.Z)(A,T,E,!1,null,null,null),J=H.exports,q={name:"RoomList",components:{RoomListItem:J}},F=q,K=(0,r.Z)(F,D,W,!1,null,null,null),z=K.exports,B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-list"})},G=[],Q={name:"UserList"},X=Q,Y=(0,r.Z)(X,B,G,!1,null,null,null),ee=Y.exports,te={name:"WaitingRoomView",components:{Chatting:$,RoomList:z,UserList:ee}},ne=te,se=(0,r.Z)(ne,O,N,!1,null,null,null),oe=se.exports,ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container",attrs:{id:"main-container"}},[e.session?e._e():t("div",{attrs:{id:"join"}},[e._m(0),t("div",{staticClass:"jumbotron vertical-center",attrs:{id:"join-dialog"}},[t("h1",[e._v("Join a video session")]),t("div",{staticClass:"form-group"},[t("p",[t("label",[e._v("Participant")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.myUserName,expression:"myUserName"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.myUserName},on:{input:function(t){t.target.composing||(e.myUserName=t.target.value)}}})]),t("p",[t("label",[e._v("Session")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.mySessionId,expression:"mySessionId"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.mySessionId},on:{input:function(t){t.target.composing||(e.mySessionId=t.target.value)}}})]),t("p",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-lg btn-success",on:{click:function(t){return e.joinSession()}}},[e._v("Join!")])])])])]),e.session?t("div",{attrs:{id:"session"}},[t("div",{attrs:{id:"session-header"}},[t("h1",{attrs:{id:"session-title"}},[e._v(e._s(e.mySessionId))]),t("input",{staticClass:"btn btn-large btn-danger",attrs:{type:"button",id:"buttonLeaveSession",value:"Leave session"},on:{click:e.leaveSession}})]),t("div",{staticClass:"col-md-6",attrs:{id:"main-video"}},[t("user-video",{attrs:{"stream-manager":e.mainStreamManager}})],1),t("div",{staticClass:"col-md-6",attrs:{id:"video-container"}},[t("user-video",{attrs:{"stream-manager":e.publisher},nativeOn:{click:function(t){return e.updateMainVideoStreamManager(e.publisher)}}}),e._l(e.subscribers,(function(n){return t("user-video",{key:n.stream.connection.connectionId,attrs:{"stream-manager":n},nativeOn:{click:function(t){return e.updateMainVideoStreamManager(n)}}})}))],2)]):e._e()])},re=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"img-div"}},[t("img",{attrs:{src:n(9713)}})])}],ae=n(9669),le=n.n(ae),ue=n(4905),ce=function(){var e=this,t=e._self._c;return e.streamManager?t("div",[t("ov-video",{attrs:{"stream-manager":e.streamManager}}),t("div",[t("p",[e._v(e._s(e.clientData))])])],1):e._e()},me=[],de=function(){var e=this,t=e._self._c;return t("video",{attrs:{autoplay:""}})},pe=[],ve={name:"OvVideo",props:{streamManager:Object},mounted(){this.streamManager.addVideoElement(this.$el)}},fe=ve,he=(0,r.Z)(fe,de,pe,!1,null,null,null),ge=he.exports,be={name:"UserVideo",components:{OvVideo:ge},props:{streamManager:Object},computed:{clientData(){const{clientData:e}=this.getConnectionData();return e}},methods:{getConnectionData(){const{connection:e}=this.streamManager.stream;return JSON.parse(e.data.split("%/%")[0])}}},_e=be,we=(0,r.Z)(_e,ce,me,!1,null,null,null),ye=we.exports;le().defaults.headers.post["Content-Type"]="application/json";var Pe={name:"App",components:{UserVideo:ye},data(){return{OV:void 0,session:void 0,mainStreamManager:void 0,publisher:void 0,subscribers:[],mySessionId:"SessionA",myUserName:"Participant"+Math.floor(100*Math.random())}},methods:{joinSession(){this.OV=new ue.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t)})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.getToken(this.mySessionId,this.myUserName),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,window.removeEventListener("beforeunload",this.leaveSession)},updateMainVideoStreamManager(e){this.mainStreamManager!==e&&(this.mainStreamManager=e)},getToken(e,t){le().post("https://localhost:8080/api/v1/rooms/get-token",{sessionName:e,id:t}).then((e=>{console.log(e.data[0]);const t=e.data[0];this.session.connect(t,{clientData:this.myUserName}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.mainStreamManager=e,console.log(this.mainStreamManager),this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))}))}}},Se=Pe,ke=(0,r.Z)(Se,ie,re,!1,null,null,null),Ce=ke.exports;s.ZP.use(c.Z);const xe=[{path:"/",name:"home",component:h},{path:"/login",name:"login",component:P},{path:"/signup",name:"signup",component:M},{path:"/waiting",name:"waiting",component:oe},{path:"/room",name:"room",component:Ce}],Ie=new c.Z({mode:"history",base:"/",routes:xe});var Me=Ie,Oe=n(629),Ne={state:{},getters:{},mutations:{},actions:{}};s.ZP.use(Oe.ZP);var Ze=new Oe.ZP.Store({modules:{accounts:Ne}});s.ZP.config.productionTip=!1,new s.ZP({router:Me,store:Ze,render:e=>e(u)}).$mount("#app")},9713:function(e,t,n){e.exports=n.p+"img/openvidu_grey_bg_transp_cropped.9bbabff2.png"},5665:function(e,t,n){e.exports=n.p+"img/background.40d47c0d.png"}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,i){if(!s){var r=1/0;for(c=0;c<e.length;c++){s=e[c][0],o=e[c][1],i=e[c][2];for(var a=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](s[l])}))?s.splice(l--,1):(a=!1,i<r&&(r=i));if(a){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,i,r=s[0],a=s[1],l=s[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var c=l(n)}for(t&&t(s);u<r.length;u++)i=r[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(8976)}));s=n.O(s)})();
//# sourceMappingURL=app.6e859487.js.map